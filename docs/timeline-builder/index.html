<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Harpoon Timeline Builder</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <style>
            /* ===============================
   BUILDER UI
   =============================== */

            body {
                font-family:
                    system-ui,
                    -apple-system,
                    BlinkMacSystemFont,
                    sans-serif;
                margin: 0;
                padding: 24px;
                background: #fafafa;
                color: #111;
            }

            h1 {
                font-size: 22px;
                margin-bottom: 16px;
            }

            .builder {
                max-width: 920px;
                margin: 0 auto 40px;
            }

            .builder fieldset {
                border: 1px solid #ddd;
                border-radius: 8px;
                padding: 16px;
                margin-bottom: 16px;
                background: #fff;
            }

            .builder label {
                display: block;
                font-size: 13px;
                margin-bottom: 4px;
            }

            .builder input,
            .builder textarea {
                width: 100%;
                padding: 8px 10px;
                margin-bottom: 12px;
                border-radius: 6px;
                border: 1px solid #ccc;
                font-size: 14px;
            }

            .builder textarea {
                resize: vertical;
                min-height: 70px;
            }

            .builder .row {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 12px;
            }

            .builder button {
                appearance: none;
                border: 0;
                background: #111;
                color: #fff;
                padding: 10px 14px;
                border-radius: 6px;
                font-size: 14px;
                cursor: pointer;
            }

            .builder button.secondary {
                background: #eee;
                color: #111;
            }

            .builder .actions {
                display: flex;
                gap: 10px;
                margin-top: 12px;
            }

            .copy-note {
                font-size: 12px;
                color: #555;
                margin-top: 6px;
            }

            /* ===============================
   PREVIEW TIMELINE
   =============================== */

            .hp-timeline {
                --line-color: #7a1c5c;
                --dot-color: #7a1c5c;
                --line-y: 40px;

                margin-top: 40px;
                padding-bottom: 40px;
                overflow-x: auto;
            }

            .hp-timeline__track {
                position: relative;
                display: flex;
                gap: 32px;
                padding: 60px 20px 20px;
                width: max-content;
                min-width: 100%; /* ensures line spans full width */
                justify-content: center; /* centers items when sparse */
            }

            /* timeline line */
            .hp-timeline__line {
                position: absolute;
                top: var(--line-y);
                left: 0;
                right: 0;
                height: 3px;
                background: var(--line-color);
                opacity: 0.35;
            }

            /* item */
            .hp-timeline__item {
                position: relative;
                width: 320px;
                flex-shrink: 0;
            }

            /* marker */
            .hp-timeline__marker {
                position: absolute;
                top: var(--line-y);
                left: 50%;
                transform: translate(-50%, -50%);
                width: 12px;
                height: 12px;
                background: var(--dot-color);
                border-radius: 50%;
                z-index: 2;
            }

            /* date */
            .hp-timeline__date {
                text-align: center;
                margin-top: calc(var(--line-y) + 10px);
                margin-bottom: 10px;
                font-weight: 700;
            }

            /* card */
            .hp-timeline__card {
                background: #fff;
                border-radius: 12px;
                padding: 16px;
                box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
            }

            .hp-timeline__image {
                width: 100%;
                aspect-ratio: 16 / 9;
                border-radius: 8px;
                background-size: cover;
                background-position: center;
                margin-bottom: 6px;
            }

            .hp-timeline__image-credit {
                font-size: 10px;
                text-align: right !important;
                color: #888;
                font-family: sans-serif;
                letter-spacing: 0.04em;
                margin-bottom: 8px;
            }

            .hp-timeline__text {
                font-size: 15px;
                line-height: 1.5;
            }

            /* mobile */
            @media (max-width: 768px) {
                .hp-timeline__item {
                    width: min(88vw, 340px);
                }
            }
        </style>
    </head>

    <body>
        <div class="builder">
            <h1>Harpoon Timeline Builder</h1>

            <fieldset>
                <label>Line colour</label>
                <input type="color" id="lineColor" value="#7a1c5c" />

                <label>Dot colour</label>
                <input type="color" id="dotColor" value="#7a1c5c" />
            </fieldset>

            <fieldset>
                <label>Date</label>
                <input id="dateInput" />

                <label>Text</label>
                <textarea id="textInput"></textarea>

                <label>Image URL (optional)</label>
                <input id="imageInput" />

                <label>Image credit (optional)</label>
                <input id="creditInput" />

                <div class="actions">
                    <button onclick="addEntry()">Add entry</button>
                    <button class="secondary" onclick="copyHTML()">
                        Copy HTML
                    </button>
                    <button class="secondary" onclick="copyCSS()">
                        Copy CSS
                    </button>
                </div>

                <div class="copy-note" id="copyNote"></div>
            </fieldset>
        </div>

        <div class="hp-timeline" id="previewTimeline">
            <div class="hp-timeline__track" id="previewTrack">
                <div class="hp-timeline__line"></div>
            </div>
        </div>

        <script>
            const entries = [];
            let activeIndex = null;

            function addEntry() {
                const entry = {
                    date: dateInput.value,
                    text: textInput.value,
                    image: imageInput.value,
                    credit: creditInput.value,
                };
                entries.push(entry);
                activeIndex = entries.length - 1;
                render();
            }

            function render() {
                const track = document.getElementById("previewTrack");
                const scrollX = track.scrollLeft;

                track.innerHTML = '<div class="hp-timeline__line"></div>';

                entries.forEach((e, i) => {
                    const item = document.createElement("div");
                    item.className = "hp-timeline__item";
                    item.dataset.index = i;

                    item.innerHTML = `
      <div class="hp-timeline__marker"></div>
      <div class="hp-timeline__date">${e.date}</div>
      <div class="hp-timeline__card">
        ${e.image ? `<div class="hp-timeline__image" style="background-image:url('${e.image}')"></div>` : ""}
        ${e.credit ? `<div class="hp-timeline__image-credit">${e.credit}</div>` : ""}
        <div class="hp-timeline__text">${e.text}</div>
      </div>
    `;
                    track.appendChild(item);
                });

                track.scrollLeft = scrollX;

                if (activeIndex !== null) {
                    const active = track.querySelector(
                        `[data-index="${activeIndex}"]`,
                    );
                    if (active) {
                        active.scrollIntoView({
                            inline: "center",
                            behavior: "smooth",
                        });
                    }
                }

                previewTimeline.style.setProperty(
                    "--line-color",
                    lineColor.value,
                );
                previewTimeline.style.setProperty(
                    "--dot-color",
                    dotColor.value,
                );
            }

            function copyHTML() {
                const html =
                    document.getElementById("previewTimeline").outerHTML;
                navigator.clipboard.writeText(html);
                showCopyNote("HTML copied");
            }

            function copyCSS() {
                const css = document.querySelector("style").innerText;
                navigator.clipboard.writeText(css);
                showCopyNote("CSS copied");
            }

            function showCopyNote(text) {
                copyNote.textContent = text;
                setTimeout(() => (copyNote.textContent = ""), 2000);
            }
        </script>
    </body>
</html>
